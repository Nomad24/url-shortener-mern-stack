(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{29:function(e,t,a){e.exports=a(42)},34:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),l=a.n(c),i=(a(34),a(11)),s=a(5),u=a(1),o=a.n(u),m=a(4),d=a(2),p=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],r=t[1];return{loading:a,request:Object(n.useCallback)(function(){var e=Object(m.a)(o.a.mark((function e(t,a,n,c){var l,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),localStorage.setItem("load","load"),e.prev=2,n&&(n=JSON.stringify(n),c["Content-Type"]="application/json"),e.next=6,fetch(t,{method:a,body:n,headers:c});case 6:return l=e.sent,e.next=9,l.json();case 9:if(i=e.sent,l.ok){e.next=12;break}throw new Error(i.message||"Something went wrong");case 12:return r(!1),localStorage.removeItem("load"),e.abrupt("return",i);case 17:throw e.prev=17,e.t0=e.catch(2),r(!1),e.t0;case 21:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t,a,n,r){return e.apply(this,arguments)}}(),[])}},b=function(){var e=Object(n.useState)(JSON.parse(localStorage.getItem("userData"))),t=Object(d.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),l=Object(d.a)(c,2),i=l[0],s=l[1];return{Token:a,userId:i,login:Object(n.useCallback)((function(e,t){r(e),s(t),localStorage.setItem("userData",JSON.stringify({userId:t,token:e}))}),[]),logout:Object(n.useCallback)((function(){r(null),s(null),localStorage.removeItem("userData")}),[])}},E=a(3),f=(a(14),function(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null),a=Object(n.useRef)(null),c=b().Token,l=Object(s.g)(),i=p().request,u=function(){var t=Object(m.a)(o.a.mark((function t(a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Enter"!==a.key){t.next=13;break}return t.prev=1,t.next=4,i("/api/link/generate","POST",{from:e.current.value},{Authorization:c.token});case 4:n=t.sent,E.b.info(n.message),setTimeout((function(){l.push("/detail/".concat(n.link._id))}),3e3),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),alert(t.t0),E.b.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=Object(m.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i("/api/link/generate","POST",{from:e.current.value},{Authorization:c.token});case 3:a=t.sent,E.b.info(a.message),setTimeout((function(){l.push("/detail/".concat(a.link._id))}),3e3),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),alert(t.t0),E.b.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),f=function(){var e=Object(m.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i("/api/link/generate-brand-link","POST",{from:t.current.value,name:a.current.value},{Authorization:c.token});case 3:"Created"==(n=e.sent).info&&(E.b.info(n.message),setTimeout((function(){l.push("/detail/".concat(n.link._id))}),3e3)),"Exist"==n.info&&E.b.error(n.message),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0),E.b.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s8 offset-s2",style:{paddingTop:"2rem"}},r.a.createElement("div",{className:"card blue darken-4"},r.a.createElement("div",{className:"card-content black-text"},r.a.createElement("p",null,"Create Link"),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{placeholder:"Paste Link",id:"link1",type:"text",ref:e,onKeyPress:u}),r.a.createElement("button",{onClick:d,className:"btn waves-light",type:"submit",name:"action"},"Submit",r.a.createElement("i",{className:"material-icons right"},"send"))))),r.a.createElement("div",{className:"card blue darken-4"},r.a.createElement("div",{className:"card-content black-text"},r.a.createElement("p",null,"Create Brand Link"),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{placeholder:"Paste Original Link",id:"link2",type:"text",ref:t}),r.a.createElement("input",{placeholder:"Paste Brand Link",id:"link-brand",type:"text",ref:a}),r.a.createElement("button",{onClick:f,className:"btn waves-light",type:"submit",name:"action"},"Submit",r.a.createElement("i",{className:"material-icons right"},"send"))))))),r.a.createElement(E.a,{autoClose:2e3})))}),v=a(20),k=a(18);var h=Object(n.createContext)({userId:null,login:function(e,t){},logout:function(){},isAuthenticated:!1}),g=(a(40),function(){var e=p(),t=e.loading,a=e.request,c=Object(n.useContext)(h),l=Object(n.useState)({email:"",password:""}),i=Object(d.a)(l,2),s=i[0],u=i[1],b=function(e){u(Object(k.a)(Object(k.a)({},s),{},Object(v.a)({},e.currentTarget.name,e.currentTarget.value)))},f=function(){var e=Object(m.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a("/api/auth/register","POST",Object(k.a)({},s),{});case 3:t=e.sent,E.b.success(t.message),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0),E.b.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(m.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a("/api/auth/login","POST",Object(k.a)({},s),{});case 3:t=e.sent,E.b.success("You have successfully logged in"),setTimeout((function(){c.login(t.token,t.userId),window.location.reload()}),3e3),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0),E.b.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s6 offset-s3"},r.a.createElement("h1",null,"URL Shortener"),r.a.createElement("div",{className:"card blue darken-4"},r.a.createElement("div",{className:"card-content white-text"},r.a.createElement("span",{className:"card-title"},"Authorization"),r.a.createElement("div",null,r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{placeholder:"Enter Email",id:"email",type:"text",name:"email",className:"yellow-input",onChange:b})),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{placeholder:"Enter Password",id:"password",type:"password",name:"password",className:"yellow-input",onChange:b})))),r.a.createElement("div",{className:"card-action"},r.a.createElement("button",{disabled:t,className:"btn green",style:{marginRight:10},onClick:g},"Sign in"),r.a.createElement("button",{disabled:t,onClick:f,className:"btn yellow darken-4"},"Sign up"))))),r.a.createElement(E.a,{autoClose:2e3})))}),O=a(16),w=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=t[0],c=t[1],l=Object(n.useRef)(null),i=Object(s.g)(),u=p().request,b=function(){var e=Object(m.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=13;break}return e.prev=1,e.next=4,u("/api/link/generate-guest","POST",{from:l.current.value},{});case 4:n=e.sent,E.b.info(n.message),c([].concat(Object(O.a)(a),[n.link.to])),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),alert(e.t0),E.b.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(m.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u("/api/link/generate-guest","POST",{from:l.current.value},{});case 3:t=e.sent,E.b.info(t.message),c([].concat(Object(O.a)(a),[t.link.to])),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0),E.b.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper blue darken-4"},r.a.createElement("a",{onClick:function(){return i.push("/")},className:"brand-logo center a_link"},"URL Shortener"),r.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-med-and-down"},r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){return i.push("/auth")}},"Sign in or Sign up"))))),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s8 offset-s2"},r.a.createElement("h2",{className:"st"},"Welcome to Url Shortener"),r.a.createElement("div",{className:"card blue darken-4"},r.a.createElement("div",{className:"card-content black-text"},r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{placeholder:"Paste your link",id:"link",type:"text",ref:l,onKeyPress:b}),r.a.createElement("label",{htmlFor:"link"},"Paste link"),r.a.createElement("button",{onClick:f,className:"btn waves-light",type:"submit",name:"action"},"Submit",r.a.createElement("i",{className:"material-icons right"},"send")))),r.a.createElement("div",{className:"card-action"},a.map((function(e,t){return r.a.createElement("div",null,r.a.createElement("h6",null,"Link"),r.a.createElement("div",{className:"blue-grey darken-1"},r.a.createElement("ul",{className:"collection"},r.a.createElement("li",{className:"collection-item"},r.a.createElement("div",null,e,r.a.createElement("a",{href:e,target:"_blank",className:"secondary-content"},r.a.createElement("i",{className:"material-icons"},"send")))))))})))))),r.a.createElement(E.a,{autoClose:2e3})))},N=a(24),j=function(e){var t=e.link,a=b().Token,n=Object(s.g)(),c=p().request,l=Object(s.h)().id,i=function(){var e=Object(m.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c("/api/link/delete/".concat(l),"DELETE",null,{Authorization:a.token});case 3:t=e.sent,E.b.error(t.message),setTimeout((function(){n.push("/links")}),3e3),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0),E.b.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(m.a)(o.a.mark((function e(t,n){var r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={},"brand"==n&&(r={name:t}),"link"==n&&(r={from:t}),e.next=6,c("/api/link/update/".concat(l),"PUT",r,{Authorization:a.token});case 6:i=e.sent,E.b.success(i.message),setTimeout((function(){window.location.reload()}),3e3),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),alert(e.t0),E.b.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"card blue darken-4"},r.a.createElement("div",{className:"card-content black-text"},t.name?r.a.createElement("h3",null,"Brand Link"):r.a.createElement("h3",null,"Link"),r.a.createElement("p",null,"Short link:"," ",r.a.createElement("a",{href:t.to,target:"_blank",rel:"noopener noreferrer"},t.to)),r.a.createElement("p",null,"Original:"," ",r.a.createElement("a",{href:t.from,target:"_blank",rel:"noopener noreferrer"},t.from)),t.name?r.a.createElement("p",null,"Brand Name: ",t.name):null,r.a.createElement("p",null,"Number of clicks on the link: ",r.a.createElement("strong",null,t.clicks)),r.a.createElement("p",null,"Date:"," ",r.a.createElement("strong",null,new Date(t.date).toLocaleDateString("en-GB"))),r.a.createElement("p",null,r.a.createElement("button",{onClick:i,className:"btn waves-light red darken-4",type:"submit",name:"action"},"Delete Link"),r.a.createElement("span",null," "),t.name?r.a.createElement("button",{onClick:Object(m.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.a)("Enter New Link",{isRequired:!0});case 2:t=e.sent,u(t,"link");case 4:case"end":return e.stop()}}),e)}))),className:"btn waves-light green darken-4",type:"submit",name:"action"},"Update Link"):null,r.a.createElement("span",null," "),t.name?r.a.createElement("button",{onClick:Object(m.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.a)("Enter New Brand Name",{isRequired:!0});case 2:t=e.sent,u(t,"brand");case 4:case"end":return e.stop()}}),e)}))),className:"btn waves-light yellow darken-4",type:"submit",name:"action"},"Update Brand Name"):null)),r.a.createElement(E.a,{autoClose:2e3}))},x=function(){var e=b().Token,t=p().request,a=Object(n.useState)(null),c=Object(d.a)(a,2),l=c[0],i=c[1],u=Object(s.h)().id,E=Object(n.useCallback)(Object(m.a)(o.a.mark((function a(){var n;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t("/api/link/".concat(u),"GET",null,{Authorization:e.token});case 3:n=a.sent,i(n),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),alert(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])}))),[e,u,t]);return Object(n.useEffect)((function(){E()}),[E]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},l&&r.a.createElement(j,{link:l})))},y=function(e){var t=e.links;return t.length?r.a.createElement("table",null,r.a.createElement("div",{className:"card blue darken-4"},r.a.createElement("div",{className:"card-content black-text"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\u2116"),r.a.createElement("th",null,"Original link"),r.a.createElement("th",null,"Short link"),r.a.createElement("th",null,"Open"))),r.a.createElement("tbody",null,t.map((function(e,t){return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.from),r.a.createElement("td",null,e.to),r.a.createElement("td",null,r.a.createElement(i.b,{to:"/detail/".concat(e._id)},"Open")))})))))):r.a.createElement("p",{className:"center"},"No links")},S=function(){return r.a.createElement("div",{style:{display:"flex",justifyContent:"center",paddingTop:"2rem"}},r.a.createElement("div",{className:"preloader-wrapper active"},r.a.createElement("div",{className:"spinner-layer spinner-red-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"})))))},C=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),i=Object(d.a)(l,2),s=i[0],u=i[1],E=p().request,f=b().Token,v=Object(n.useCallback)(Object(m.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,E("/api/link/","GET",null,{Authorization:f.token});case 4:t=e.sent,c(t),u(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),alert(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])}))),[f,E]);return Object(n.useEffect)((function(){v()}),[v]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},s?r.a.createElement(S,null):r.a.createElement(y,{links:a})))},T=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),i=Object(d.a)(l,2),s=i[0],u=i[1],E=p().request,f=b().Token,v=Object(n.useCallback)(Object(m.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,E("/api/link/brand-name","GET",null,{Authorization:f.token});case 4:t=e.sent,c(t),u(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),alert(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])}))),[f,E]);return Object(n.useEffect)((function(){v()}),[v]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},s?r.a.createElement(S,null):r.a.createElement(y,{links:a})))},L=function(e){return e.isAuth?r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/create",exact:!0},r.a.createElement(f,null)),r.a.createElement(s.b,{path:"/detail/:id"},r.a.createElement(x,null)),r.a.createElement(s.b,{path:"/links"},r.a.createElement(C,null)),r.a.createElement(s.b,{path:"/brand-links"},r.a.createElement(T,null)),r.a.createElement(s.a,{to:"/create"})):r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/auth"},r.a.createElement(g,null)),r.a.createElement(s.b,{path:"/",exact:!0},r.a.createElement(w,null)),r.a.createElement(s.a,{to:"/"}))},P=function(){var e=Object(s.g)(),t=Object(n.useContext)(h),a=b().Token,c=p().request,l=Object(n.useState)([]),i=Object(d.a)(l,2),u=i[0],E=i[1],f=function(){var e=Object(m.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c("/api/auth/".concat(a.userId),"POST",null,{Authorization:a.token});case 3:t=e.sent,E((function(e){return[].concat(Object(O.a)(e),[t.email])})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){f()}),[a]);return r.a.createElement("div",null,r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper blue darken-4"},r.a.createElement("a",{className:"brand-logo a_link",onClick:function(){return e.push("/")}},"URL Shortener"),r.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-med-and-down"},r.a.createElement("li",{style:{paddingRight:"20px"}},"Logged as ",r.a.createElement("strong",{style:{color:"black"}},u)),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){return e.push("/create")}},"Create")),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){return e.push("/links")}},"Links")),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(){return e.push("/brand-links")}},"Brand Links")),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(e){e.preventDefault(),t.logout(),window.location.reload()}},"Logout"))))))};a(41);var A=function(){var e=b(),t=e.Token,a=e.userId,n=e.login,c=e.logout,l=!!t;return r.a.createElement(h.Provider,{value:{userId:a,login:n,logout:c,isAuthenticated:l}},r.a.createElement(i.a,null,l&&r.a.createElement(P,null),r.a.createElement(L,{isAuth:l})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[29,1,2]]]);
//# sourceMappingURL=main.f004dc3e.chunk.js.map